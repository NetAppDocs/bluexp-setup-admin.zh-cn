---
sidebar: sidebar 
permalink: concept-accounts-aws.html 
keywords: cloud provider accounts, aws, aws accounts, keys, multiple accounts, permissions, aws permissions, policy, policies, credentials 
summary: 了解BlueXP如何使用AWS凭据和权限代表您执行操作。了解这些详细信息有助于您在BlueXP中管理一个或多个AWS帐户的凭据。例如、您可能希望了解何时向BlueXP添加其他AWS凭据。 
---
= AWS 凭据和权限
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
了解BlueXP如何使用AWS凭据和权限代表您执行操作。了解这些详细信息有助于您在BlueXP中管理一个或多个AWS帐户的凭据。例如、您可能希望了解何时向BlueXP添加其他AWS凭据。



== 初始 AWS 凭据

从BlueXP部署Connector时、您需要为IAM用户提供IAM角色的ARN或访问密钥。您使用的身份验证方法必须具有在 AWS 中部署 Connector 实例所需的权限。中列出了所需的权限 link:task-set-up-permissions-aws.html["AWS 的连接器部署策略"]。

当BlueXP在AWS中启动Connector实例时、它会为此实例创建IAM角色和实例配置文件。此外，它还会附加一个策略，为 Connector 提供管理该 AWS 帐户中资源和进程的权限。 link:reference-permissions-aws.html["查看BlueXP如何使用权限"]。

image:diagram_permissions_initial_aws.png["一个概念映像、显示了BlueXP在AWS帐户中部署Connector。IAM策略会分配给一个IAM角色、该角色会附加到BlueXP实例。"]

默认情况下、在为Cloud Volumes ONTAP 创建新工作环境时、BlueXP会选择以下AWS凭据：

image:screenshot_accounts_select_aws.gif["屏幕截图，显示 \"Details\" 和 \"amp\" ； \"Credentials\" 页面中的 \"Switch Account\" 选项。"]

您可以使用初始 AWS 凭据部署所有 Cloud Volumes ONTAP 系统，也可以添加其他凭据。



== 其他 AWS 凭据

可以通过两种方式添加其他AWS凭据：

* 您可以向现有Connector添加AWS凭据
* 您可以将AWS凭据直接添加到BlueXP


有关更多详细信息、请查看以下各节。



=== 将 AWS 凭据添加到现有 Connector

如果您要在不同的AWS帐户中启动Cloud Volumes ONTAP 、则可以为IAM用户提供AWS密钥、也可以为受信任帐户中某个角色的ARN提供AWS密钥。下图显示了另外两个帐户，一个通过可信帐户中的 IAM 角色提供权限，另一个通过 IAM 用户的 AWS 密钥提供权限：

image:diagram_permissions_multiple_aws.png["一个概念映像，显示另外两个帐户。每个都有一个 IAM 策略，一个附加到 IAM 用户，另一个附加到 IAM 角色。"]

然后、您可以通过指定IAM角色的Amazon资源名称(ARN)或IAM用户的AWS密钥将帐户凭据添加到BlueXP。

添加另一组凭据后，您可以在创建新的工作环境时切换到这些凭据：

image:screenshot_accounts_switch_aws.png["单击详细信息和 amp ；凭据页面中的切换帐户后，显示在云提供商帐户之间进行选择的屏幕截图。"]

link:task-adding-aws-accounts.html#add-additional-credentials-to-a-connector["了解如何向现有Connector添加AWS凭据。"]



=== 将AWS凭据直接添加到BlueXP

向BlueXP添加新的AWS凭据可提供创建和管理适用于ONTAP 的FSX工作环境或创建连接器所需的权限。

* link:task-adding-aws-accounts.html#add-credentials-to-bluexp-for-creating-a-connector["了解如何将AWS凭据添加到适用于Amazon FSX for ONTAP 的BlueXP中"^]
* link:task-adding-aws-accounts.html#add-additional-credentials-to-a-connector["了解如何向BlueXP添加AWS凭据以创建Connector"]




== 市场部署和内部部署如何？

以上各节介绍了BlueXP中建议的Connector部署方法。您还可以从AWS Marketplace在AWS中部署Connector、并在您自己的Linux主机上手动安装Connector软件。

如果您使用 Marketplace ，则会以相同方式提供权限。您只需手动创建和设置 IAM 角色，然后为任何其他帐户提供权限即可。

对于内部部署、您无法为BlueXP系统设置IAM角色、但可以使用AWS访问密钥提供权限。

要了解如何设置权限、请参见以下页面：

* 标准模式
+
** link:task-set-up-permissions-aws.html["设置AWS权限"]
** link:task-set-up-permissions-on-prem.html["为内部部署设置云权限"]


* link:task-prepare-restricted-mode.html#prepare-cloud-permissions["为受限模式设置云权限"]
* link:task-prepare-private-mode.html#prepare-cloud-permissions["为私有模式设置云权限"]




== 如何安全地轮换 AWS 凭据？

如上所述、您可以通过BlueXP通过以下几种方式提供AWS凭据：与Connector实例关联的IAM角色、在可信帐户中承担IAM角色或提供AWS访问密钥。

对于前两个选项、BlueXP使用AWS安全令牌服务获取持续轮换的临时凭据。这是最佳实践—它是自动的，安全的。

如果您为BlueXP提供了AWS访问密钥、则应定期在BlueXP中更新这些密钥以轮换使用。这是一个完全手动的过程。
